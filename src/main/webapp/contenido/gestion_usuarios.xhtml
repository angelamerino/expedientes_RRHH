<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../resources/plantilla/plantilla.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="styles">
        <link href="#{request.contextPath}/resources/datatables/css/jquery.dataTables.css" rel="stylesheet" type="text/css"/>
    </ui:define>

    <ui:define name="content">
        <h:form id="form-usuario" class="form-horizontal" role="form" prependId="false">
            <p:growl showDetail="true"/>
            <div class="page-header">
                <h1>Mantenimientos de Usuarios del Sistema</h1>
            </div>
            <div class="panel panel-info">
                <div class="panel-heading"><strong>Editar / Eliminar Usuarios</strong></div>
                <div class="panel-body">
                    
                            <div class="table-responsive">
                                <h:dataTable id="user-list" value="#{manejadorUsuarios.todosUsuarios}" var="usuario" class="table table-striped">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Usuario"/>
                                        </f:facet>
                                        <h:outputText value="#{usuario.idUsuario}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Nombre completo"/>
                                        </f:facet>
                                        <h:outputText value="#{usuario.nombreCompleto}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Nombre de Usuario"/>
                                        </f:facet>
                                        <h:outputText value="#{usuario.usuario}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Estado"/>
                                        </f:facet>
                                        <h:outputText value="#{usuario.idEstadoUsuario}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Fecha creación"/>
                                        </f:facet>
                                        <h:outputText value="#{usuario.fechaCreaUsistema}">
                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                                        </h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Opciones"/>
                                        </f:facet>
                                        <p:commandLink value="Ver / Editar" oncomplete="PF('dlgActualizarUsuario').show();" process="@this" update=":form-usuario:panel-actualizar-usuario">
                                            <f:setPropertyActionListener value="#{usuario}" target="#{manejadorUsuarios.usuarioSeleccionado}"/>
                                        </p:commandLink>
                                    </h:column>
                                </h:dataTable>
                            </div>
                        
                </div>
            </div>
<!--            <p:dialog header="Actualizar usuario" modal="true" widgetVar="dlgActualizarUsuario" position="center top">
                <div class="table-responsive">
                    <h:panelGrid id="panel-actualizar-usuario" columns="2" class="table">
                        <h:outputLabel value="Usuario:" for="idUsuario" />
                        <h:inputText id="idUsuario" value="{managerUsuarios.selectedUsuario.idUsuario}" title="IdUsuario" required="true" class="form-control" disabled="true"/>
                        <h:outputLabel value="Nombres:" for="userName" />
                        <h:inputText id="userName" value="{managerUsuarios.selectedUsuario.userName}" title="UserName" required="true" class="form-control"/>
                        <h:outputLabel value="Apellidos:" for="userLastname" />
                        <h:inputText id="userLastname" value="{managerUsuarios.selectedUsuario.userLastname}" title="UserLastname" required="true" class="form-control"/>
                        <h:outputLabel value="Email:" for="userEmail" />
                        <h:inputText id="userEmail" value="{managerUsuarios.selectedUsuario.userEmail}" title="UserEmail" class="form-control"/>
                        <h:outputLabel value="Teléfono:" for="userTelephone" />
                        <h:inputText id="userTelephone" value="{managerUsuarios.selectedUsuario.userTelephone}" title="UserTelephone" class="form-control"/>
                        <h:outputLabel value="Estado" for="userStatus" />
                        <h:selectOneMenu id="userStatus" value="{managerUsuarios.selectedUsuario.userStatus}" title="UserStatus" required="true" class="form-control">
                            <f:selectItem itemLabel="Seleccione uno..." itemValue="" noSelectionOption="true"/>
                            <f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO" />
                            <f:selectItem itemLabel="INACTIVO" itemValue="INACTIVO" />
                        </h:selectOneMenu>
                    </h:panelGrid>
                    <p:commandButton icon="ui ui-icon-disk" value="Actualizar usuario" process="@this panel-actualizar-usuario" action="{managerUsuarios.editUsuario()}" update="panel-actualizar-usuario :form-usuario:accordion-users:user-list" oncomplete="PF('dlgActualizarUsuario').hide();"/>
                </div>
            </p:dialog>-->
        </h:form>
    </ui:define>

    <ui:define name="scripts">
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <h:outputScript library="primefaces" name="jquery/jquery.js"/>
        <script src="#{request.contextPath}/resources/datatables/jquery.dataTables.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#accordion-users\\:user-list').dataTable({
                    "oLanguage": {
                        "sProcessing": "Procesando...",
                        "sLengthMenu": "Mostrar _MENU_ registros",
                        "sZeroRecords": "No se encontraron resultados",
                        "sEmptyTable": "Ningún dato disponible en esta tabla",
                        "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                        "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                        "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                        "sInfoPostFix": "",
                        "sSearch": "Buscar:",
                        "sUrl": "",
                        "sInfoThousands": ",",
                        "sLoadingRecords": "Cargando...",
                        "oPaginate": {
                            "sFirst": "Primero",
                            "sLast": "Último",
                            "sNext": "Siguiente",
                            "sPrevious": "Anterior"
                        },
                        "oAria": {
                            "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                            "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                        }
                    }
                });
            });
        </script>
    </ui:define>
   

</ui:composition>

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                template="../WEB-INF/templates/plantilla.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <h:form prependId="false">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h4>REGISTRO DE MEJORA SALARIAL</h4>
                </div>
                <div class="panel-body">
                    <p:growl autoUpdate="true" showDetail="true"/>
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-12">
                            <div class="form-group">
                                <h:outputLabel value="Dirección Nacional:"/>                                
                                <h:selectOneMenu class="form-control" id="dirNacionalFiltrarJefe" style="width: 100%" value="#{manejadorAumentoMejoraSalarial.direccionNacional}" rendered="true" requiredMessage="Seleccione una Dirección Nacional">
                                    <f:selectItem itemLabel="Seleccione uno..." noSelectionOption="true" itemValue=""/>
                                    <f:selectItems value="#{manejadorAumentoMejoraSalarial.fetchDireccionesNacionales()}" var="dirNacional" itemLabel="#{dirNacional.nombreDirNac}" itemValue="#{dirNacional.idDirNac}"/>
                                    <p:ajax update="filtrarDependencia"/>
                                </h:selectOneMenu>
                            </div>
                            <div class="form-group">
                                <h:outputLabel value="Dependencia / Unidad organizativa:"/>
                                <h:selectOneMenu class="form-control" id="filtrarDependencia"  style="width: 100%" value="#{manejadorAumentoMejoraSalarial.dependecia}" rendered="true" requiredMessage="Seleccione una Dependencia/Unidad Organizativa">
                                    <f:selectItem itemLabel="Seleccione uno..." noSelectionOption="true" itemValue=""/>
                                    <f:selectItems value="#{manejadorAumentoMejoraSalarial.fetchDependenciasFiltradas()}" var="a" itemLabel="#{a.nombreDependencia}" itemValue="#{a.idDependencia}"/>
                                    <p:ajax update="filtrarEmpleado"/>
                                </h:selectOneMenu>
                            </div>
                            <div class="form-group">
                                <h:outputLabel value="Empleado:"/>
                                <h:selectOneMenu class="form-control" id="filtrarEmpleado" style="width: 100%" value="#{manejadorAumentoMejoraSalarial.selectedEmp}" rendered="true" requiredMessage="Seleccione un Empleado" converter="#{empleadoConvertidor}">
                                    <f:selectItem itemLabel="Seleccione uno..." noSelectionOption="true" itemValue=""/>
                                    <f:selectItems value="#{manejadorAumentoMejoraSalarial.fetchFilteredEmps()}" var="emp" itemLabel="#{emp.nombreEmpleado}" itemValue="#{emp}"/>
                                    <p:ajax update="tbl-historial-salarial"/>
                                </h:selectOneMenu>
                                <div class="form-group">
                                    <p class="text-justify" style="padding-top: 10px;">
                                        <p:commandButton id="new-button" process="@this" action="#{manejadorAumentoMejoraSalarial.checkEmpSelection()}" value="Nuevo historial" icon="fa fa-plus"/>
                                    </p>
                                    <p:dataTable id="tbl-historial-salarial" value="#{manejadorAumentoMejoraSalarial.fetchHistorialByEmp()}" var="hist" rowKey="#{hist.idHsalarial}" scrollable="true" paginator="true" rows="10">
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Empleado"/>
                                            </f:facet>
                                            <h:outputText value="#{hist.idEmpleado.nombreEmpleado}"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Tipo de mejora"/>
                                            </f:facet>
                                            <h:outputText value="#{hist.idMejoraSal.nombreMejoraSal}"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Fecha aplicada"/>
                                            </f:facet>
                                            <h:outputText value="#{hist.fechaHsalarial}">
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="TipoHistorial"/>
                                            </f:facet>
                                            <h:outputText value="#{hist.tipoHistorial}"/>
                                        </p:column>
                                        <p:column style="width: 150px;" styleClass="text-center">
                                            <f:facet name="header">
                                                <h:outputText value="Opc."/>
                                            </f:facet>
                                            <p:commandButton process="@this tbl-historial-salarial" update="panel-edit-historial" icon="fa fa-pencil" value="Editar historial" oncomplete="PF('dlgEditHistSal').show();">
                                                <f:setPropertyActionListener value="#{hist}" target="#{manejadorAumentoMejoraSalarial.selectedHistSal}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p:dialog id="dlg-new-hist" header="Nuevo historial salarial" widgetVar="dlgNewHistSal" responsive="true" modal="true" position="center top" style="padding: 10px;">
                        <p:panelGrid id="panel-new-historial" columns="2">
                            <p:outputLabel value="Salario actual:" for="salarioActualHsalarial" />
                            <p:inputText id="salarioActualHsalarial" value="#{manejadorAumentoMejoraSalarial.newHistSal.salarioActualHsalarial}" title="SalarioActualHsalarial" />
                            <p:outputLabel value="Nuevo salario:" for="nuevoSalarioHsalarial" />
                            <p:inputText id="nuevoSalarioHsalarial" value="#{manejadorAumentoMejoraSalarial.newHistSal.nuevoSalarioHsalarial}" title="NuevoSalarioHsalarial" />
                            <p:outputLabel value="Porcentaje de incremento (%):" for="porcentajeHsalarial" />
                            <p:inputText id="porcentajeHsalarial" value="#{manejadorAumentoMejoraSalarial.newHistSal.porcentajeHsalarial}" title="PorcentajeHsalarial" />
                            <p:outputLabel value="Fecha aplicación:" for="fechaHsalarial" />
                            <p:calendar id="fechaHsalarial" value="#{manejadorAumentoMejoraSalarial.newHistSal.fechaHsalarial}" title="FechaHsalarial" required="true" requiredMessage="The FechaHsalarial field is required." pattern="MM/dd/yyyy" />
                            <p:outputLabel value="NumDocDecreto:" for="numDocDecreto" />
                            <p:inputText id="numDocDecreto" value="#{manejadorAumentoMejoraSalarial.newHistSal.numDocDecreto}" title="NumDocDecreto" />
                            <p:outputLabel value="UserCreaHsal:" for="userCreaHsal" />
                            <p:inputText id="userCreaHsal" value="#{manejadorAumentoMejoraSalarial.newHistSal.userCreaHsal}" title="UserCreaHsal" />
                            <p:outputLabel value="FechaCreaHsal:" for="fechaCreaHsal" />
                            <p:inputText id="fechaCreaHsal" value="#{manejadorAumentoMejoraSalarial.newHistSal.fechaCreaHsal}" title="FechaCreaHsal" >
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </p:inputText>
                            <p:outputLabel value="UserModHsal:" for="userModHsal" />
                            <p:inputText id="userModHsal" value="#{manejadorAumentoMejoraSalarial.newHistSal.userModHsal}" title="UserModHsal" />
                            <p:outputLabel value="FechaModHsal:" for="fechaModHsal" />
                            <p:inputText id="fechaModHsal" value="#{manejadorAumentoMejoraSalarial.newHistSal.fechaModHsal}" title="FechaModHsal" >
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </p:inputText>
                            <p:outputLabel value="IdMejoraSal:" for="idMejoraSal" />
                            <p:selectOneMenu id="idMejoraSal" value="#{manejadorAumentoMejoraSalarial.newHistSal.idMejoraSal}" >
                                <!-- TODO: update below reference to list of available items-->
                                <f:selectItems value="#{fixme}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="IdEmpleado:" for="idEmpleado" />
                            <p:selectOneMenu id="idEmpleado" value="#{manejadorAumentoMejoraSalarial.newHistSal.idEmpleado}" >
                                <!-- TODO: update below reference to list of available items-->
                                <f:selectItems value="#{fixme}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="TipoHistorial:" for="tipoHistorial" />
                            <p:inputText id="tipoHistorial" value="#{manejadorAumentoMejoraSalarial.newHistSal.tipoHistorial}" title="TipoHistorial" />
                            <p:outputLabel value="VerificacionHistorial:" for="verificacionHistorial" />
                            <p:inputText id="verificacionHistorial" value="#{manejadorAumentoMejoraSalarial.newHistSal.verificacionHistorial}" title="VerificacionHistorial" />
                            <p:outputLabel value="SalMin:" for="salMin" />
                            <p:inputText id="salMin" value="#{manejadorAumentoMejoraSalarial.newHistSal.salMin}" title="SalMin" />
                            <p:outputLabel value="SalMax:" for="salMax" />
                            <p:inputText id="salMax" value="#{manejadorAumentoMejoraSalarial.newHistSal.salMax}" title="SalMax" />
                        </p:panelGrid>
                    </p:dialog>
                    <p:dialog header="Editar historial salarial" widgetVar="dlgEditHistSal" responsive="true" modal="true" position="center top" style="padding: 10px;">
                        <p:panelGrid id="panel-edit-historial" columns="2">
                            <p:outputLabel value="IdHsalarial:" for="idHsalarialEdit" />
                            <p:inputText id="idHsalarialEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.idHsalarial}" title="IdHsalarial" required="true" requiredMessage="The IdHsalarial field is required."/>
                            <p:outputLabel value="SalarioActualHsalarial:" for="salarioActualHsalarialEdit" />
                            <p:inputText id="salarioActualHsalarialEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.salarioActualHsalarial}" title="SalarioActualHsalarial" />
                            <p:outputLabel value="NuevoSalarioHsalarial:" for="nuevoSalarioHsalarialEdit" />
                            <p:inputText id="nuevoSalarioHsalarialEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.nuevoSalarioHsalarial}" title="NuevoSalarioHsalarial" />
                            <p:outputLabel value="PorcentajeHsalarial:" for="porcentajeHsalarialEdit" />
                            <p:inputText id="porcentajeHsalarialEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.porcentajeHsalarial}" title="PorcentajeHsalarial" />
                            <p:outputLabel value="FechaHsalarial:" for="fechaHsalarialEdit" />
                            <p:inputText id="fechaHsalarialEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.fechaHsalarial}" title="FechaHsalarial" required="true" requiredMessage="The FechaHsalarial field is required.">
                                <f:convertDateTime pattern="MM/dd/yyyy" />
                            </p:inputText>
                            <p:outputLabel value="NumDocDecreto:" for="numDocDecretoEdit" />
                            <p:inputText id="numDocDecretoEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.numDocDecreto}" title="NumDocDecreto" />
                            <p:outputLabel value="UserCreaHsal:" for="userCreaHsalEdit" />
                            <p:inputText id="userCreaHsalEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.userCreaHsal}" title="UserCreaHsal" />
                            <p:outputLabel value="FechaCreaHsal:" for="fechaCreaHsalEdit" />
                            <p:inputText id="fechaCreaHsalEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.fechaCreaHsal}" title="FechaCreaHsal" >
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </p:inputText>
                            <p:outputLabel value="UserModHsal:" for="userModHsalEdit" />
                            <p:inputText id="userModHsalEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.userModHsal}" title="UserModHsal" />
                            <p:outputLabel value="FechaModHsal:" for="fechaModHsalEdit" />
                            <p:inputText id="fechaModHsalEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.fechaModHsal}" title="FechaModHsal" >
                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                            </p:inputText>
                            <p:outputLabel value="IdMejoraSal:" for="idMejoraSalEdit" />
                            <p:selectOneMenu id="idMejoraSalEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.idMejoraSal}" >
                                <!-- TODO: update below reference to list of available items-->
                                <f:selectItems value="#{fixme}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="IdEmpleado:" for="idEmpleadoEdit" />
                            <p:selectOneMenu id="idEmpleadoEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.idEmpleado}" >
                                <!-- TODO: update below reference to list of available items-->
                                <f:selectItems value="#{fixme}"/>
                            </p:selectOneMenu>
                            <p:outputLabel value="TipoHistorial:" for="tipoHistorialEdit" />
                            <p:inputText id="tipoHistorialEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.tipoHistorial}" title="TipoHistorial" />
                            <p:outputLabel value="VerificacionHistorial:" for="verificacionHistorialEdit" />
                            <p:inputText id="verificacionHistorialEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.verificacionHistorial}" title="VerificacionHistorial" />
                            <p:outputLabel value="SalMin:" for="salMinEdit" />
                            <p:inputText id="salMinEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.salMin}" title="SalMin" />
                            <p:outputLabel value="SalMax:" for="salMaxEdit" />
                            <p:inputText id="salMaxEdit" value="#{manejadorAumentoMejoraSalarial.selectedHistSal.salMax}" title="SalMax" />
                        </p:panelGrid>
                    </p:dialog>
                </div>
            </div>
        </h:form>

    </ui:define>

</ui:composition>
